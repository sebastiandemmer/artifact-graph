<!doctype html>


<html>
<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/jquery.qtip.min.css" integrity="sha512-gzOclZ+eCH3Q9u9xjgJyfuIfh7Vw+LJvz7nyBROrLrJypPSaeM6+f+T6GJU6yDj6ACzUf+LS/wcJhxlQZsU8sg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/jquery.qtip.min.js" integrity="sha512-CqYmYYaF5Pfbfe5S5OTZxDf4lIVKtFPh8lR9XtG5/c5S5ux5I5YfrzDEiAgqSEgBLK5yCca+W8Wk9XaJnZgMfA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
    <script src="https://unpkg.com/weaverjs@1.2.0/dist/weaver.min.js"></script>
    <script src="js/cytoscape-spread.js"></script>
    <style>
        #cy {
            width: 90%;
            height: 90%;
            position: absolute;
            top: 0px;
            left: 0px;
            border: 1px dotted grey;
        }
    </style>
    <title>Artifact Graph</title>
</head>
<body>
    <h1>Artifact Graph</h1>
    <div id="cy"></div>
    <script> 
    window.addEventListener('DOMContentLoaded', function(){
        var cy = cytoscape({
            container: document.getElementById('cy'),
            layout: {
                name: 'spread',
                // minDist: 40
            },
            elements: fetch('./graph_data.json').then(function( res ){ return res.json(); }),
            style: [
                {
                    selector: 'node',
                    style: {
                        'background-color': 'red',
                        label: 'data(id)'
                    }
                },
                {
                    selector: 'edge',
                    style: {
                        label: 'data(label)'
                    }
                },
                {
                    selector: '.file',
                    style: {
                        shape: 'rectangle'
                    }
                },
                {
                    selector: '.blue',
                    style: {
                        'background-color': 'blue'
                    }
                }
            ]

        });

        cy.on('mouseover', 'node', function(event) {
        var node = event.target;
        var tooltip = node.data('tooltip');
        node.qtip({
            content: tooltip,
            show: {
            event: event.type,
            ready: true
            },
            hide: {
            event: 'mouseout unfocus'
            },
            style: {
            classes: 'qtip-bootstrap'
            }
        }, event);
        });

        cy.on('mouseout', 'node', function(event) {
            var node = event.target;
            node.qtip('hide');
        });

    });

    </script>
    </div>
</body>
</html>